<template name="channels.index">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <div class="page-header mb-4">
          <h2>
            {{__ "channels.index.title"}}
          </h2>
          <p class="lead">{{__ "channels.index.subtitle"}}</p>
        </div>
        {{#if cursorIsEmpty channels}}
          <p>{{__ "channels.index.emptyListDescription"}}</p>
          <p>
            <u>
              <a class="btn btn-dark" href="{{pathFor 'channels.new'}}">
                {{__ "channels.index.emptyListCreateFirst"}}</a>
            </u>
          </p>
        {{else}}
          <a href="{{pathFor 'channels.new'}}" class="btn btn-dark mb-4">{{__ "channels.index.connectNew"}}</a>
          <div class="card-list">
            <!-- <div class="card-list-head">
              <h6>Channels</h6>
            </div> -->
            <div class="card-list-body">
              {{#each channels}}
                {{> channelsIndexTableChannel}}
              {{/each}}
            </div>
          </div>
        {{/if}}
      </div>
    </div>
  </div>
</template>

<template name="channelsIndexTableChannel">
  <div class="card clickable card-task">
    <div class="card-body">
      <div class="mr-3 card-image card-mini-icon text-center">
        <i class="{{serviceProperty this.type 'icon'}}" style="color: {{serviceProperty this.type 'iconColor'}}"></i>
      </div>
      <div class="card-title mr-auto">
        <a href="{{pathFor 'channels.one.edit' type=type _id=_id}}">
          <h6>
            {{#if isEq this.type 'agent'}}
              {{{sAgentReportStatusDot}}}
            {{/if}}
            <strong>{{serviceHumanName this.type}}:</strong>
            {{this.title}}
          </h6>
        </a>
        <span class="text-small">
          {{#if this.description}}
            {{this.description}}
          {{else}}
            -
          {{/if}}
          {{#if isEq this.type 'agent'}}
            <i><span class="text-muted">{{{sAgentReportStatus}}}</span></i>
          {{/if}}
        </span>
      </div>
      <div class="card-meta">
        <a href="{{pathFor 'channels.one.edit' type=type _id=_id}}" class="btn btn-outline-primary">
          {{__ "channels.index.itemView"}}
        </a>
      </div>
    </div>
  </div>
</template>